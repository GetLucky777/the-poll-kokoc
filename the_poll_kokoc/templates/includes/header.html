{% load static %}
<header>
  <nav class="navbar navbar-light" style="background-color: #e3f2fd;">
    <div class="container">
      <ul class="nav nav-pills nav-fill w-100">
        {% with request.resolver_match.view_name as view_name %}
          <li class="nav-item"> 
            <a class="nav-link {% if view_name == 'polls:index' %}active{% endif %}" 
            href="{% url 'polls:index' %}">Главная</a>
          </li>
          <li class="nav-item">
            <a class="nav-link {% if view_name == 'polls:leaderboard' %}active{% endif %}"
            href="{% url 'polls:leaderboard' %}">Таблица лидеров</a>
          </li>
        {% if user.is_authenticated %}
          <li class="nav-item"> 
            <a class="nav-link {% if view_name == 'polls:profile' %}active{% endif %}" 
            href="{% url 'polls:profile' %}">Профиль</a>
          </li>
          <li class="nav-item"> 
            <a class="nav-link {% if view_name == 'polls:shop' %}active{% endif %}" 
            href="{% url 'polls:shop' %}">Магазин</a>
          </li>
          <li class="nav-item"> 
            <a class="nav-link {% if view_name == 'users:password_change' %}active{% endif %}" 
            href="{% url 'users:password_change' %}">Изменить пароль</a>
          </li>
          <li class="nav-item"> 
            <a class="nav-link {% if view_name == 'users:logout' %}active{% endif %}" 
            href="{% url 'users:logout' %}">Выйти</a>
          </li>
          <li class="nav-item">
            {{ user.username }} 
          </li>
        {% else %}
          <li class="nav-item"> 
            <a class="nav-link {% if view_name == 'users:login' %}active{% endif %}"
            href="{% url 'users:login' %}">Войти</a>
          </li>
          <li class="nav-item"> 
            <a class="nav-link {% if view_name == 'users:signup' %}active{% endif %}"
            href="{% url 'users:signup' %}">Регистрация</a>
          </li>
        {% endif %}
        {% endwith %}
      </ul>
    </div>
  </nav>
</header>